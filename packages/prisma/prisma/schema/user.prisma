model User {
  id                String    @id @default(cuid())
  name              String?
  email             String?   @unique
  phoneNumber       String    @unique @map("phone_number")
  role              UserRole  @default(USER)
  isActive          Boolean   @default(true) @map("is_active")
  isEmailVerified   Boolean   @default(false) @map("is_email_verified")
  isPhoneVerified   Boolean   @default(false) @map("is_phone_verified")
  isProfileComplete Boolean   @default(false) @map("is_profile_complete")
  lastLoginAt       DateTime? @map("last_login_at")
  createdAt         DateTime  @default(now()) @map("created_at")
  updatedAt         DateTime  @updatedAt @map("updated_at")

  // Relations
  cartItems     CartItem[]
  orders        Order[]
  payments      Payment[]
  addresses     UserAddress[]
  wishlists     Wishlist[]
  reviews       Review[]
  notifications Notification[]

  @@index([email])
  @@index([phoneNumber])
  @@index([role])
  @@index([createdAt])
  @@map("users")
}

model UserAddress {
  id           String   @id @default(cuid())
  userId       String   @map("user_id")
  fullName     String   @map("full_name")
  phoneNumber  String   @map("phone_number")
  addressLine1 String   @map("address_line1")
  addressLine2 String?  @map("address_line2")
  landmark     String?
  city         String
  state        String
  postalCode   String   @map("postal_code")
  country      String   @default("India")
  latitude     Float?
  longitude    Float?
  isDefault    Boolean  @default(false) @map("is_default")
  addressType  String?  @map("address_type") // HOME, WORK, OTHER
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  // Relations
  user   User    @relation(fields: [userId], references: [id], onDelete: Cascade)
  orders Order[]

  @@index([userId])
  @@index([isDefault])
  @@map("user_addresses")
}